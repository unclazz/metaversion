<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8" />
	<title>プロジェクト</title>
	<style type="text/css">
		[ng\:cloak], [ng-cloak], .ng-cloak {
			display: none !important;
		}
	</style>
	<link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
	<link href="../static/css/app.css" th:href="@{/css/app.css}" rel="stylesheet"/>
</head>
<body ng-app="mvProjects">
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="collapse navbar-collapse">
				<a class="navbar-brand" href="index.html">
					<img alt="Brand" src="../static/img/logo_40x70.png" th:src="@{/img/logo_40x70.png}" height="20" width="35" />
				</a>
				<a class="navbar-brand" href="index.html">
					<span th:text="${app.name}">AppName</span>
					<span th:text="${app.version}">1.0.0</span>
				</a>
				<ul class="nav navbar-nav">
					<li><a href="projects.html">プロジェクト</a></li>
					<li><a href="repositories.html">リポジトリ</a></li>
					<li th:if="${user.admin}"><a href="users.html">ユーザ</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li class="navbar-text"><span th:text="${user.name}">foo</span></li>
					<li><a href="logout">ログアウト</a></li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container" ng-controller="list">
		<nav>
			<ol class="breadcrumb">
				  <li><a href="index.html" th:href="@{/index}">トップ</a></li>
				  <li class="active">プロジェクト</li>
			</ol>
		</nav>

		<header class="page-header">
			<h1>プロジェクト検索</h1>
		</header>

		<article>
			<form method="get" name="thisForm" ng-submit="searchClicked($event)">
				<div class="panel panel-default">
					<div class="panel-heading">
						検索条件
					</div>
					<table class="table">
						<tr>
							<th>検索方法</th>
							<td>
								<div class="btn-group">
									<label class="btn btn-default" ng-model="cond.pathbase" uib-btn-radio="false">プロジェクト名</label>
									<label class="btn btn-default" ng-model="cond.pathbase" uib-btn-radio="true">変更パス名</label>
								</div>
							</td>
						</tr>
						<tr>
							<th>プロジェクト名</th>
							<td>
								<input type="text"
									class="form-control"
									name="like"
									autocomplete="off"
									placeholder="3文字以上のキーワードを入力してください"
									required="required"
									ng-model="cond.like"
									uib-typeahead="name for name in projectOrPathNames($viewValue)"
									typeahead-min-length="3"
									typeahead-focus-first="false"
									ng-required="true"
									ng-minlength="3" />
							</td>
						</tr>
					</table>
					<div class="panel-body">
						<button class="btn btn-primary" type="submit" ng-disabled="thisForm.$invalid">検索</button>
					</div>
				</div>
			</form>
		</article>

		<article ng-show="list.length > 0">
			<div class="panel panel-default">
				<div class="panel-heading">
					検索結果一覧
				</div>
				<div class="panel-body">

					<div class="row">
						<div class="col-lg-3">
							<!-- empty -->
						</div>
						<div class="col-lg-6">
							<uib-pagination total-items="totalSize"
								ng-model="cond.page"
								ng-change="pageChanged()"
								max-size="5"
								class="pagination-sm"
								boundary-links="true"
								items-per-page="size"
								first-text="最初"
								previous-text="前"
								next-text="次"
								last-text="最後"
							></uib-pagination>
						</div>
						<div class="col-lg-2">
							<!-- empty -->
						</div>
						<div class="col-lg-1">
							<a class="btn btn-default" href="project-edit.html">追加</a>
						</div>
					</div>
				</div>
				<table class="table table-hover table-condensed">
					<thead>
						<tr>
							<th>プロジェクトコード</th>
							<th>プロジェクト名</th>
							<th>アクション</th>
						</tr>
					</thead>
					<tbody>
						<tr  ng-repeat="item in list">
							<td>{{item.code}}</td>
							<td><a href="#" ng-href="{{makeDetailPagePath(item)}}">{{item.name}}</a></td>
							<td>
								<div class="btn-group btn-group-xs" role="group">
									<a class="btn btn-default" href="#" ng-href="project.html#?id={{item.id}}" role="button">プロジェクト詳細</a>
									<a class="btn btn-default" href="#" ng-href="project-resource-list.html#?id={{item.id}}" role="button">リソース一覧</a>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
				<div class="panel-body">
					<div class="row">
						<div class="col-lg-6">
						</div>
						<div class="col-lg-6">
						</div>
					</div>
				</div>
			</div>
		</article>
	</div>

	<script src="../static/js/angular.js" th:src="@{/js/angular.js}" type="text/javascript"></script>
	<script src="../static/js/angular-resource.js" th:src="@{/js/angular-resource.js}" type="text/javascript"></script>
	<script src="../static/js/ui-bootstrap-tpls.js" th:src="@{/js/ui-bootstrap-tpls.js}" type="text/javascript"></script>
	<script src="../static/js/app.js" th:src="@{/js/app.js}" type="text/javascript"></script>
</body>
</html>